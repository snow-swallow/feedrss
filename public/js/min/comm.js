String.implement({cnEncode:function(){return encodeURIComponent(this)},cnDecode:function(){return decodeURIComponent(this)},charCode:function(){var e=this.length,t="";for(var n=0;n<e;n+=1)t+=this.charCodeAt(n);return t},trimHTML:function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},t=/[&|<|>|"]/g;return this.replace(t,function(t){return e[t]})},escapeBlank:function(){var e;e=this.replace(/\s/g,"&nbsp;");var t=new RegExp("<br>","g");return e=e.replace(t,"\n"),e},revertBlank:function(){return this.replace(/\n/g,"<br>")},trimSearch:function(){return DBC2SBC(this.trim()).replace(/[^a-zA-Z0-9\u4E00-\u9FA5 \-\_\uff0c\']/g,"")}}),Element.implement({appendHTML:function(e,t){if($type(e)!="string")return!1;t=t||"bottom";var n=new Element("div");n.set("html",e);var r=t=="bottom"||t=="top"?$A(n.childNodes):$A(n.childNodes).reverse();return r.each(function(e){$type(e)=="element"&&$(e).inject(this,t)},this),this},css:function(e,t){if($type(e)=="object"){for(var n in e)this.css(n,e[n]);return this}return $chk(t)?(this.setStyle(e,t),this):this.getStyle(e)},attr:function(e,t){if($type(e)=="object"){for(var n in e)this.attr(n,e[n]);return this}return $chk(t)?(this.setProperty(e,t),this):t===""?this.removeProperty(e):this.getProperty(e)},val:function(e){return $chk(e)||e==""?this.set("value",e):this.get("value")},w:function(e){return $chk(e)?this.css("width",e):this.getWidth()},h:function(e){return $chk(e)?this.css("height",e):this.getHeight()},html:function(e){return $chk(e)||e==""?this.set("html",e):this.get("html")},txt:function(e){return $chk(e)||e==""?this.set("text",e):this.get("text")},isDisplayed:function(){return this.getStyle("display")!="none"},isInto:function(){return this.getStyle("position")=="static"},toggle:function(){return this[this.isDisplayed()?"hide":"show"]()},hide:function(){return this.css("display","none")},show:function(e){return this.css("display",e||"block")},visible:function(){return this.css("visibility","visible")},invisible:function(){return this.css("visibility","hidden")},out:function(){return this.css({position:"absolute",top:"-9999px",left:"-9999px"})},into:function(){return this.css("position","static")},swapClass:function(e,t){return this.removeClass(e).addClass(t)}});var $isFun=function(e){return $type(e)==="function"},$isEle=function(e){return $type(e)==="element"},$isObj=function(e){return $type(e)==="object"},$isArr=function(e){return $type(e)==="array"},$isStr=function(e){return $type(e)==="string"},$isNum=function(e){return $type(e)==="number"},$isIe6=function(){return window.XMLHttpRequest?!1:!0}(),DBC2SBC=function(t){var n="";for(i=0;i<t.length;i++)code=t.charCodeAt(i),code>=65281&&code<=65373?n+=String.fromCharCode(t.charCodeAt(i)-65248):code==12288?n+=String.fromCharCode(t.charCodeAt(i)-12288+32):n+=t.charAt(i);return n},$isRegex=function(e,t,n){return $(e).val().trim().test(t,n||"i")},$isEmpty=function(e,t){t=t||$(e).attr("placeholder");var n=$(e).val().trim();return!n||n===t?!0:!1};$isRegex.extend({EMAIL:"^[a-z0-9._%-]+@[a-z0-9]+(\\.[a-z]{2,4}){1,4}$",URL:"^(http|https|ftp)\\:\\/\\/[a-z0-9\\-\\.]+\\.[a-z]{2,3}(:[a-z0-9]*)?\\/?([a-z0-9\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$",MOBILE:"^1\\d{10}$",ZIPCODE:"^\\d{6}$"});var $imageMaxWidth=function(e,t,n){t=t.toInt();if(!$isEle(e)||!t)return!1;var r=e.nodeName.toLowerCase();if(r!=="img")return!1;n=n||e.src;var i=new Image;i.onload=function(){var n=i.width;n>t?e.width=t:e.width=n},i.src=n},$loadScript=function(e,t,n){n&&$(n)&&$(n).dispose(),$isFun(t)||(t=$empty);var r=document.createElement("script");r.type="text/javascript",n&&(r.id=n),r.readyState?r.onreadystatechange=function(){if(r.readyState==="loaded"||r.readyState==="complete")r.onreadystatechange=null,t()}:r.onload=function(){t()},r.src=e,document.getElementsByTagName("head")[0].appendChild(r)},$pageFresh=function(e){window.location.href=e||window.location.href.split("#")[0]},$classToggle=function(e,t){var n={addClass:"",removeClass:"",eventType:"hover",inCall:$empty,outCall:$empty},r=$extend(n,t||{}),i=function(e){e.swapClass(r.removeClass,r.addClass),$isFun(r.inCall)&&r.inCall.call(e)},s=function(e){e.swapClass(r.addClass,r.removeClass),$isFun(r.outCall)&&r.outCall.call(e)};$isStr(r.removeClass)&&$isStr(r.addClass)&&($isEle(e)&&(e=[e]),$isArr(e)&&e.each(function(e){$isEle(e)&&(r.eventType==="hover"?e.addEvents({mouseenter:function(){i(this)},mouseleave:function(){s(this)}}):r.eventType==="click"?e.addEvents({mousedown:function(){i(this)},mouseup:function(){s(this)}}):r.eventType==="focus"&&e.addEvents({focus:function(){i(this)},blur:function(){s(this)}}))}))},$visibleToggle=function(e,t){var n={attribute:"rel",eventType:"click",property:"position",display:!1,showCall:$empty,hideCall:$empty},r=$extend(n,t||{}),i;$isEle(e)&&(e=[e]),$isArr(e)&&e.each(function(e){e.store("display",r.display).addEvent(r.eventType,function(){var t=$(this.attr(r.attribute))||$$("."+this.attr(r.attribute));this.retrieve("display")?(r.property==="position"?t.out():r.property==="display"?t.hide():r.property==="visibility"&&t.invisible(),e.store("display",!1),$isFun(r.hideCall)&&r.hideCall.call(this)):(r.property==="position"?t.into():r.property==="display"?t.show():r.property==="visibility"&&t.visible(),e.store("display",!0),$isFun(r.showCall)&&r.showCall.call(this));if(this.get("tag")==="a")return!1})})},$tabSwitch=function(e,t){var n={eventType:"click",classAdd:"",classRemove:"",property:"position",targetAttr:"rel",timeDelay:100,timePlay:0,switchCall:$empty},r=$extend(n,t||{}),i,s,o,u,a=r.timeDelay.toInt(),f=r.timePlay.toInt();r.elementCache=null,r.indexCache=-1;var l=function(t,n){var s=r.elementCache,u,a;r.eventType==="hover"&&($isNum(n)?r.indexCache=n:f>0&&(r.indexCache=r.indexCache===i-1?0:r.indexCache+1,o=l.delay(f))),t=t||e[r.indexCache];if(!$isEle(t))return;t.swapClass(r.classRemove,r.classAdd);if(a=$(t.attr(r.targetAttr)))r.property==="position"?a.into():r.property==="display"&&a.show();r.elementCache=t;if($isEle(s)&&s!==t){s.swapClass(r.classAdd,r.classRemove);if(u=$(s.attr(r.targetAttr)))r.property==="position"?u.out():r.property==="display"&&u.hide()}$isFun(r.switchCall)&&r.switchCall.call(t,a,s,u)};$isArr(e)&&(i=e.length)&&i>0&&(r.classAdd||(r.elementCache=e[0],r.indexCache=0),e.each(function(e,t){r.classAdd&&e.hasClass(r.classAdd)&&(r.elementCache=e,r.indexCache=t);switch(r.eventType){case"click":e.addEvent("click",function(){this.hasClass(r.classAdd)||l(this);if(this.get("tag")==="a")return!1});break;case"hover":e.addEvents({mouseenter:function(){f>0&&($clear(u),$clear(o)),this.hasClass(r.classAdd)||(a>0?s=l.pass([this,t]).delay(a):(r.indexCache=t,l(this)))},mouseleave:function(){$clear(s),f>0&&(u=l.delay(f))}})}}),$chk(f)&&r.eventType==="hover"&&(u=l.delay(f)))},$powerFloat=function(e,t){$isEle(e)&&(e=[e]);if(!$isArr(e))return!1;var n={width:"auto",offsets:{x:0,y:0},zIndex:19,eventType:"hover",showDelay:0,hideDelay:0,hoverHold:!0,targetMode:"common",target:null,targetAttr:"rel",container:null,reverseSharp:!1,position:"4-1",edgeAdjust:!1,showCall:$empty,hideCall:$empty},r={targetGet:function(){if(!this.trigger)return this;var e=this.trigger.attr(this.s.targetAttr),t=this.s.target;switch(this.s.targetMode){case"common":return t?$isEle(t)?r.target=t:$isArr(t)&&$isEle(t[0])?r.target=t[0]:$isStr(t)&&$(t)&&(r.target=$(t)):e&&$(e)&&(r.target=$(e)),r.target&&r.targetShow(),this;case"ajax":var n=t||e;this.targetProtect=!1;if(/(\.jpg|\.png|\.gif|\.bmp|\.jpeg)$/i.test(n))if(r.cacheData[n])r.target=r.cacheData[n],r.targetShow();else{var i=new Image;r.loading(),i.onload=function(){var e=i.width,t=i.height,s=$(window).getWidth(),u=$(window).getHeight(),a=e/t,f=s/u;a>f?e>s/2&&(e=s/2,t=e/a):t>u/2&&(t=u/2,e=t*a);var l=(new Element("img")).attr({width:e,height:t,src:n,"class":"float_ajax_image"});r.target=l,r.cacheData[n]=l,r.targetShow()},i.onerror=function(){r.target=(new Element("div")).addClass("float_ajax_error").set("text","\u56fe\u7247\u52a0\u8f7d\u5931\u8d25\uff01"),r.targetShow()},i.src=n}else n&&(r.cacheData[n]?(r.target=(new Element("div")).addClass("float_ajax_data").html(r.cacheData[n]),r.targetShow()):(r.loading(),(new Request.HTML({method:"get",url:n,onComplete:function(e,t,i,s){r.target=(new Element("div")).addClass("float_ajax_data").html(i),r.targetShow(),r.cacheData[n]=i},onError:function(){r.target=(new Element("div")).addClass("float_ajax_error").set("text","\u6570\u636e\u6ca1\u6709\u52a0\u8f7d\u6210\u529f\u3002"),r.targetShow()}})).send()));break;case"list":var s=(new Element("ul")).addClass("float_list_ul"),u="",a;$isArr(t)&&(a=t.length)?t.each(function(e,t){var n="",r="",i,s;t===0&&(r=' class="float_list_li_first"'),t===a-1&&(r=' class="float_list_li_last"'),$isObj(e)&&(i=e.text.toString())?(s=e.href||"javascript:")?n='<a href="'+s+'" class="float_list_a">'+i+"</a>":n=i:e&&$isStr(e)&&(n=e),n&&(u+="<li"+r+">"+n+"</li>")}):u+='<li class="float_list_null">\u5217\u8868\u65e0\u6570\u636e\u3002</li>',r.target=s.html(u),this.targetProtect=!1,r.targetShow();break;case"remind":var f=t||e;this.targetProtect=!1,$isStr(f)&&(r.target=(new Element("span")).html(f),r.targetShow());break;default:var l=t||e;l&&($isStr(l)?$$(l).length?(r.target=$$(l)[0],this.targetProtect=!0):r.target=(new Element("div")).html(l):$isEle(l)?r.target=l:$isArr(l)&&$isEle(l[0])&&(r.target=l[0]),r.targetShow())}return this},container:function(){var e=this.s.container,t=this.s.targetMode||"mode";return t==="ajax"||t==="remind"?this.s.sharpAngle=!0:this.s.sharpAngle=!1,this.s.reverseSharp&&(this.s.sharpAngle=!this.s.sharpAngle),t!=="common"&&(e===null&&(e="plugin"),e==="plugin"&&($("floatBox_"+t)||(new Element("div")).attr("id","floatBox_"+t).addClass("float_"+t+"_box").out().inject(document.body),e=$("floatBox_"+t)),e&&!$isStr(e)&&(this.targetProtect&&r.target.show().into(),r.target=e.empty().adopt(r.target))),this},setWidth:function(){var e=this.s.width;return e==="auto"?this.target.style.width&&this.target.css("width","auto"):e==="inherit"?this.target.w(this.trigger.w()):this.target.css("width",e),this},position:function(){var e=this.trigger.getPosition(),t=0,n=0,i=0,s=0,u,a,f,l,c,h,p=this.target.h(),d=this.target.w(),v=window.getScroll().y,m=this.s.offsets.x.toInt()||0,g=this.s.offsets.y.toInt()||0,t=this.trigger.h();n=this.trigger.w(),u=e.x,a=e.y;var y=["4-1","1-4","5-7","2-3","2-1","6-8","3-4","4-3","8-6","1-2","7-5","3-2"],b=this.s.position,w=!1,E;y.each(function(e){if(e===b){w=!0;return}}),w||(b="4-1");var S=function(e){var t="bottom";switch(e){case"1-4":case"5-7":case"2-3":t="top";break;case"2-1":case"6-8":case"3-4":t="right";break;case"1-2":case"8-6":case"4-3":t="left";break;case"4-1":case"7-5":case"3-2":t="bottom"}return t},x=function(e){return e==="5-7"||e==="6-8"||e==="8-6"||e==="7-5"?!0:!1},T=function(e){var i=0,s=0,f=r.s.sharpAngle&&r.corner?!0:!1;if(e==="right"){s=u+n+d+m,f&&(s+=r.corner.w());if(s>$(window).getWidth())return!1}else if(e==="bottom"){i=a+t+p+g,f&&(i+=r.corner.h());if(i>v+$(window).getHeight())return!1}else if(e==="top"){i=p+g,f&&(i+=r.corner.h());if(i>a-v)return!1}else if(e==="left"){s=d+m,f&&(s+=r.corner.w());if(s>u)return!1}return!0};E=S(b),this.s.sharpAngle&&this.createSharp(E),this.s.edgeAdjust&&(T(E)?function(){if(x(b))return;var e={top:{right:"2-3",left:"1-4"},right:{top:"2-1",bottom:"3-4"},bottom:{right:"3-2",left:"4-1"},left:{top:"1-2",bottom:"4-3"}},t=e[E],n;if(t)for(n in t)T(n)||(b=t[n])}():function(){if(x(b)){var e={"5-7":"7-5","7-5":"5-7","6-8":"8-6","8-6":"6-8"};b=e[b]}else{var t={top:{left:"3-2",right:"4-1"},right:{bottom:"1-2",top:"4-3"},bottom:{left:"2-3",right:"1-4"},left:{bottom:"2-1",top:"3-4"}},n=t[E],r=[];for(name in n)r.push(name);T(r[0])||!T(r[1])?b=n[r[0]]:b=n[r[1]]}}());var N=S(b),C=b.split("-")[0];this.s.sharpAngle&&(this.createSharp(N),i=this.corner.w(),s=this.corner.h());switch(N){case"top":l=a-g-p-s,C=="1"?f=u-m:C==="5"?f=u-(d-n)/2-m:f=u-(d-n)-m,h=a-s-g-1,c=u-(i-n)/2;break;case"right":f=u+n+m+i,C=="2"?l=a+g:C==="6"?l=a-(p-t)/2+g:l=a-(p-t)+g,c=u+n+m+1,h=a-(s-t)/2;break;case"bottom":l=a+t+g+s,C=="4"?f=u+m:C==="7"?f=u-(d-n)/2+m:f=u-(d-n)+m,h=a+t+g+1,c=u-(i-n)/2;break;case"left":f=u-d-m-i,C=="2"?l=a-g:C==="6"?l=a-(d-n)/2-g:l=a-(p-t)-g,c=f+i,h=a-(d-i)/2}return s&&i&&this.corner&&this.corner.css({left:c,top:h,zIndex:this.s.zIndex+1}),this.target.css({position:"absolute",left:f,top:l,zIndex:this.s.zIndex}),this},createSharp:function(e){var t,n,r="",i="",s={left:"right",right:"left",bottom:"top",top:"bottom"},o=s[e]||"top";this.target&&(t=this.target.css("background-color"),this.target.css("border-"+o+"-width").toInt()>0&&(n=this.target.css("border-"+o+"-color")),n&&n!=="transparent"?r='style="color:'+n+';"':r='style="display:none;"',t&&t!=="transparent"?i='style="color:'+t+';"':i='style="display:none;"');var u='<span class="corner corner_1" '+r+'>\u25c6</span><span class="corner corner_2" '+i+">\u25c6</span>",a=(new Element("div")).attr("id","floatCorner_"+e).addClass("float_corner float_corner_"+e).html(u);return $("floatCorner_"+e)||a.inject(document.body),this.corner=$("floatCorner_"+e),this},targetHold:function(){if(this.s.hoverHold){var e=this.s.hideDelay.toInt()||200;this.target.addEvents({mouseenter:function(){r.flagDisplay=!0},mouseleave:function(){r.flagDisplay=!1,setTimeout(function(){r.displayDetect()},e)}})}return this},loading:function(){return this.target=(new Element("div")).addClass("float_loading"),this.targetShow(),this},displayDetect:function(){return this.flagDisplay||this.targetHide(),this},targetShow:function(){return r.cornerClear(),this.flagDisplay=!0,this.container().setWidth().position(),this.target.show(),$isFun(this.s.showCall)&&this.s.showCall.call(this.trigger,this.target),window.powerFloatHide=function(){r.targetHide()},this},targetHide:function(){return this.flagDisplay=!1,this.targetClear(),this.cornerClear(),$isFun(this.s.hideCall)&&this.s.hideCall.call(this.trigger),this.target=null,this.trigger=null,this.s={},this.targetProtect=!1,this},targetClear:function(){this.target&&(this.targetProtect&&this.target.getFirst().out().inject(document.body),this.target.out())},cornerClear:function(){this.corner&&this.corner.dispose()},target:null,trigger:null,s:{},cacheData:{},targetProtect:!1},i=function(e){if(!r.flagDisplay)return!1;var t=e.page.x,n=e.page.y,s=r.target.getPosition(),u=r.target.w(),a=r.target.h();return r.s.eventType==="click"&&e.target!=r.trigger&&(t>s.x&&t<s.x+u&&n>s.y&&n<s.y+a||(r.flagDisplay=!1,r.displayDetect(),document.removeEvent("mouseup",i))),!1};return e.each(function(e){var s=$extend(n,t||{}),u=function(e,t){r.target&&r.target.isDisplayed()&&r.targetHide(),r.s=e,r.trigger=t};switch(s.eventType){case"hover":e.addEvents({mouseenter:function(){var e=s.showDelay.toInt(),t;u(s,this),e?(t&&$clear(t),t=r.targetGet.bind(r).delay(e)):r.targetGet()},mouseleave:function(){r.flagDisplay=!1,r.targetHold(),s.hoverHold?setTimeout(function(){r.displayDetect()},200):r.displayDetect()}}),s.hoverFollow&&$(this).mousemove(function(e){return r.cacheData.left=e.page.x,r.cacheData.top=e.page.y,r.targetGet(),!1});break;case"click":e.addEvent("click",function(e){return r.flagDisplay&&e.target===r.trigger?(r.flagDisplay=!1,r.displayDetect()):(u(s,this),r.targetGet()),document[r.flagDisplay?"addEvent":"removeEvent"]("mouseup",i),!1});break;case"focus":e.addEvents({focus:function(){setTimeout(function(){u(s,this),r.targetGet()}.bind(this),200)},blur:function(){r.flagDisplay=!1,setTimeout(function(){r.displayDetect()},190)}});break;default:u(s,e),r.targetGet()}})};$powerFloat.extend({hide:function(){window.powerFloatHide&&powerFloatHide()}});var $startDrag=function(e,t){var n={left:0,top:0,currentX:0,currentY:0,flag:!1};e.addEvent("mousedown",function(e){n.flag=!0,n.left=t.getPosition().x,n.top=t.getPosition().y,n.currentX=e.page.x,n.currentY=e.page.y}),e.onselectstart=function(){return!1},document.addEvents({mouseup:function(){n.flag=!1},mousemove:function(e){if(n.flag){var r=e.page.x,i=e.page.y,s=r-n.currentX,o=i-n.currentY;t.css({left:n.left+s,top:n.top+o})}}})},$lazyLoading=function(e,t){var n={attr:"data-url",container:window},r=$extend(n,t||{});r.cache=[],r.container!==window&&!$isEle(r.container)&&(r.container=window),$isEle(e)&&(e=[e]),$isArr(e)&&e.each(function(e){var t=e.get("tag"),n=e.attr(r.attr);if(!n)return;var i={obj:e,tag:t,url:n};r.cache.push(i)});var i=function(){var e=r.container.getScroll().y,t=e+r.container.getHeight();return r.cache.each(function(n){var i=n.obj,s=n.tag,o=n.url,u,a;if(i){r.container===window?u=i.getPosition().y:u=i.getPosition(r.container).y,a=u+i.h();if(u>e&&u<t||a>e&&a<t)s==="img"?i.attr("src",o):i.load(o),n.obj=null}}),!1};i(),r.container.addEvent("scroll",i)},$smoothSlide=function(e,t,n){if(!e||!t)return;var r={direct:"left",duration:"normal",index:0,visible:1,loop:1,name:"slide",autoTime:0,prev:null,next:null,prevCall:$empty,nextCall:$empty},i=$extend(r,n||{}),s=new Hash,o=0;t=$splat(t),i.length=t.length;if(i.length<i.visible)return;t.each(function(e,t){s[t]=-1*o;if(i.direct==="left"||i.direct==="right")o+=e.w();else if(i.direct==="top"||i.direct==="bottom")o+=e.h()}),e.set("tween",{duration:i.duration}).css(i.direct,s[i.index]);var u=function(t){e.tween(i.direct,t)},a=function(e){e.css("opacity","100").css("filter","alpha(opacity=100)").css("z-index","20")},f=function(e){e.css("opacity","0").css("filter","alpha(opacity=0)").css("z-index","-20")},l=function(){var e=i.name+"_prev_disable",t=i.name+"_next_disable";i.prev&&(i.index<=0?(i.prev.addClass(e).store("disable",!0),i.index=0,f(i.prev)):(i.prev.removeClass(e).store("disable",!1),a(i.prev))),i.next&&(i.index>=i.length-i.visible?(i.next.addClass(t).store("disable",!0),i.index=i.length-i.visible,f(i.next)):(i.next.removeClass(t).store("disable",!1),a(i.next)))};l(),i.prev&&i.prev.addEvent("click",function(){return this.retrieve("disable")||(i.index-=i.loop,l(),u(s[i.index]),$isFun(i.prevCall)&&i.prevCall.call(this,e)),!1}),i.next&&i.next.addEvent("click",function(){return this.retrieve("disable")||(i.index+=i.loop,l(),u(s[i.index]),$isFun(i.nextCall)&&i.nextCall.call(this,e)),!1});if(i.autoTime.toInt()>0){var c=i.next;setInterval(function(){c.fireEvent("click"),c.retrieve("disable")&&(c==i.next?c=i.prev:c=i.next)},i.autoTime)}},$testRemind=function(e,t,n){$isEle(e)&&t&&$powerFloat(e,{eventType:null,targetMode:"remind",target:t,zIndex:201,position:n?"5-7":"1-4"})};$testRemind.extend({hide:function(){$("floatBox_remind")&&($("floatBox_remind").out(),$$(".float_corner").dispose())},bind:function(){document.retrieve("testRemind")||document.addEvent("mousedown",function(){$testRemind.hide()}).store("testRemind",!0)}});var $autoRemind=function(e,t){$isEle(e)&&(t=t||e.attr("placeholder"),t&&$classToggle(e,{eventType:"focus",inCall:function(){this.val().trim()===t&&(this.value=""),this.css("color","#333")},outCall:function(){this.val().trim()===""&&(this.value=t,this.css("color","#999"))}}))},$selectUrl=function(e){$isEle(e)&&e.addEvent("change",function(){$pageFresh(this.val())})},$selectDown=function(e,t,n){if(!$isEle(e))return;$powerFloat(e,{width:"inherit",eventType:"click",targetMode:"list",target:t,zIndex:320,showCall:function(){this.addClass("custom_select_focus");var e=this.getElement(".custom_select_word");$$(".float_list_a").each(function(t){var r=t.txt().trim();r===e.txt().trim()&&t.addClass("float_list_a_on"),t.addEvent("click",function(t){var r=(new Event(t)).target,i=r.txt();e.txt(i),$powerFloat.hide(),n&&$isFun(n)&&n.call(r,i)}.bind(this))}.bind(this))},hideCall:function(){this.removeClass("custom_select_focus")}})},AjaxReq=new Class({Implements:[Options,Events],options:{url:null,method:"get",data:null,headers:{},async:!0,evalScripts:!0,secure:!1,update:!1,callType:"json",timeOut:3e4,onRequest:$empty,onSuccess:$empty,onError:$empty},initialize:function(e){this.setOptions(e);var t={url:this.options.url,method:this.options.method,data:this.options.data,headers:this.options.headers,async:this.options.async,evalScripts:this.options.evalScripts,secure:this.options.secure,update:this.options.update};t.onRequest=this.request.bind(this),t.onSuccess=this.success.bind(this),t.onFailure=t.onException=t.onCancel=this.error.bind(this);switch(this.options.callType){case"html":this.ajax=new Request.HTML(t);break;case"json":this.ajax=new Request.JSON(t)}return this},error:function(){return this.options.timeOut&&$clear(this.options.timeOut),this.fireEvent("error"),this},success:function(e,t,n,r){return this.options.timeOut&&$clear(this.options.timeOut),this.options.callType=="html"?this.$events.success&&this.fireEvent("success",[e,t,n,r]):this.$events.success&&this.fireEvent("success",[e,t]),this},request:function(){return this.fireEvent("request"),this},send:function(e){this.options.timeOut=setTimeout(function(){this.ajax.cancel()}.bind(this),this.options.timeOut),this.ajax.send(e)}}),AjaxPost=new Class({Implements:[Options],options:{url:"",remind:null,text:"",delay:0,data:{},callback:$empty},initialize:function(e,t){this.setOptions(t),this.ele=$(e),this.options.url=this.options.url||this.ele.attr("href")},href:function(){this.ele.addEvent("click",function(){return this.send(),!1}.bind(this))},send:function(){var e=this.options,t=this.ele,n=t.txt();if(!t)return;e.url&&t.retrieve("ajax")!=0&&(t.store("ajax",!1),e.text&&t.txt(e.text),(new AjaxReq({url:e.url,data:e.data,method:"post",onSuccess:function(r){return t.store("ajax",!0),$jsonHandle(r,e),e.text&&t.txt(n),$isFun(e.callback)&&e.callback(r),!1},onError:function(){t.store("ajax",!0);var r={succ:!1,msg:"\u62b1\u6b49\uff0c\u7531\u4e8e\u7cfb\u7edf\u7684\u539f\u56e0\uff0c\u521a\u624d\u7684\u64cd\u4f5c\u6ca1\u6709\u6210\u529f\uff0c\u60a8\u53ef\u4ee5\u7a0d\u540e\u91cd\u8bd5\u3002"};return $jsonHandle(r,e),e.text&&t.txt(n),!1}})).send())}}),$jsonHandle=function(e,t){e&&(e.msg&&(t.remind&&$(t.remind)?(e.succ?$(t.remind).html(e.msg).swapClass("co","cg"):$(t.remind).html(e.msg).swapClass("cg","co"),t.delay.toInt()>0&&setTimeout(function(){$(t.remind).empty()},t.delay.toInt())):Ibox.alert(e.msg,null,{time:t.delay})),e.url?$pageFresh(e.url):e.refresh&&$pageFresh())},Overlay=new Class({Implements:[Options,Events],getOptions:function(){return{useFx:!1,name:"",duration:200,colour:"#000",opacity:.8,zIndex:99,container:document.body,onClick:$empty}},initialize:function(e){return this.setOptions(this.getOptions(),e),this.options.container=$(this.options.container),this.container=(new Element("div")).attr("id",this.options.name+"_overlay").css({position:"absolute",left:"0",top:"0",width:"100%",minWidth:"980px",height:"100%",backgroundColor:this.options.colour,zIndex:this.options.zIndex,opacity:this.options.opacity,filter:"alpha(opacity="+this.options.opacity*100+")"}).inject(this.options.container),this.options.useFx?this.fade=(new Fx.Tween(this.container,{property:"opacity",duration:this.options.duration})).set(0):this.fade=null,this.container.setStyle("display","none"),this.container.addEvent("click",function(){this.fireEvent("click")}.bind(this)),window.addEvent("resize",this.position.bind(this)),this.position()},position:function(){if(this.options.container==document.body){var e=window.getScrollHeight()+"px";this.container.setStyles({top:"0px",height:e})}else{var t=this.options.container.getCoordinates();this.container.setStyles({top:t.top+"px",height:t.height+"px",left:t.left+"px",width:t.width+"px"})}},show:function(){return this.container.setStyle("display",""),this.fade&&this.fade.cancel().start(this.options.opacity),this.position()},hide:function(e){return this.fade&&this.fade.cancel().start(0),this.container.setStyle("display","none"),e&&this.dispose(),this},dispose:function(){this.container.dispose()}}),Observer=new Class({Implements:[Options,Events],options:{periodical:!1,delay:1e3},initialize:function(e,t,n){this.setOptions(n),this.addEvent("onFired",t),this.element=$(e)||$$(e),this.boundChange=this.changed.bind(this),this.resume()},changed:function(){var e=this.element.get("value");if(this.value==e||JSON.encode(this.value)==JSON.encode(e))return;this.clear(),this.value=e,this.timeout=this.onFired.delay(this.options.delay,this)},setValue:function(e){return this.value=e,this.element.set("value",e),this.clear()},onFired:function(){this.fireEvent("onFired",[this.value,this.element])},clear:function(){return $clear(this.timeout||null),this},pause:function(){return $clear(this.timeout),$clear(this.timer),this.element.removeEvent("keyup",this.boundChange),this},resume:function(){return this.value=this.element.get("value"),this.options.periodical?this.timer=this.changed.periodical(this.options.periodical,this):this.element.addEvent("keyup",this.boundChange),this}}),Ibox={presets:{marginImage:{x:50,y:75},width:"auto",height:"auto",url:!1,type:"ele",ajax:!1,ajaxAttr:"href",ajaxOptions:{},title:"\u63d0\u793a\u6846",ensure:"\u786e\u5b9a",cancel:"\u53d6\u6d88",clostxt:"\u00d7",loadimg:"/public/img/loading.gif",overlay:!0,opacity:.8,overlayClosable:!1,reposition:!0,closable:!0,titleable:!0,optable:!1,dragable:!0,zIndex:199,time:0,useFx:!0,resizeFx:{},onShow:$empty,onClose:$empty},initialize:function(e){return this.options={},this.setOptions(this.presets,e||{}),this.build(),this.bound={window:this.reposition.bind(this,!0),close:this.close.bind(this),key:this.onKey.bind(this)},this.isOpen=this.elementObj=!1,this.ie6=window.XMLHttpRequest?!1:!0,this.time=this.options.time.toInt(),this},build:function(){this.overlay||(this.overlay=new Overlay({name:"ibox",opacity:this.options.opacity,onClick:this.options.overlayClosable?this.close.bind(this):null,zIndex:this.options.zIndex-1}));if(!$("iboxWindow")){var e='<div id="iboxBar" class="ibox_bar"><div id="iboxTitle" class="ibox_title ovh">'+this.options.title+"</div>"+'<div class="ibox_close_box"><a href="javascript:;" id="iboxBtnClose" class="ibox_close" title="\u5173\u95ed">'+this.options.clostxt+"</a></div>"+"</div>"+'<div id="iboxContent" class="ibox_cont"></div>'+'<div id="iboxOperate" class="ibox_operate" style="display:none;"></div>';this.win=(new Element("div",{id:"iboxWindow","class":"ibox_win",styles:{position:"absolute",top:-9999,left:-9999,visibility:"hidden",zIndex:this.options.zIndex+2}})).set("html",e),document.body.adopt(this.win)}return this.bar=$("iboxBar"),this.title=$("iboxTitle"),this.closbtn=$("iboxBtnClose"),this.cont=$("iboxContent"),this.opt=$("iboxOperate"),this},assign:function(e,t){e.addEvent("click",function(e){(new Event(e)).stop(),Ibox.open(t,this)})},open:function(e,t){e=e||{},this.initialize(e),$isEle(t)&&(this.element=$(t),this.options.url=this.options.url||this.element.attr(this.options.ajaxAttr)),this.getContent()},remind:function(e,t){return e&&(this.initParams(),t=t||{},this.initialize(t),this.getContent('<div class="ibox_remind">'+e+"</div>"),this.closbtn.invisible(),this.bar.hide(),this.opt.hide(),this.time>0&&this.close.delay(this.time,this)),this},alert:function(e,t,n){if(!e)return this;this.initParams(),n=n||{},this.initialize(n),this.getContent('<div class="ibox_alert">'+e+"</div>"),this.opt.show(),this.bar.show(),this.AlertBtnOk=(new Element("a",{id:"iboxAlertOk","class":"greebtn",href:"javascript:;"})).txt(this.options.ensure),this.AlertBtnOk.addEvent("click",function(){$type(t)==="function"&&t.call(this),this.close()}.bind(this)),this.opt.empty().adopt(this.AlertBtnOk),this.time>0&&this.close.delay(this.time,this)},confirm:function(e,t,n,r){if(!e)return this;this.initParams(),r=r||{},this.initialize(r),this.getContent('<div class="ibox_alert">'+e+"</div>"),this.opt.show(),this.bar.show(),this.ConfirmBtnOk=(new Element("a",{id:"iboxConfirmOk","class":"greebtn mr20",href:"javascript:;"})).txt(this.options.ensure),this.ConfirmBtnCancel=(new Element("a",{id:"iboxConfirmCancel","class":"grabtn",href:"javascript:;"})).txt(this.options.cancel),this.opt.empty().adopt(this.ConfirmBtnOk,this.ConfirmBtnCancel),this.ConfirmBtnOk.addEvent("click",function(){$type(t)==="function"&&t.call(this)}.bind(this)),this.ConfirmBtnCancel.addEvent("click",function(){$type(n)==="function"&&n.call(this),this.close()}.bind(this))},loading:function(e){return this.initialize({}),e=e||'<div class="ibox_loading"><img src="'+this.options.loadimg+'" class="ibox_loading_image" />\u52a0\u8f7d\u4e2d...</div>',this.getContent(e),this.closbtn.invisible(),this.bar.hide(),this.opt.hide(),this},close:function(){this.isOpen&&(this.isOpen=!1,$isFun(this.options.onClose)&&this.options.onClose.call(this),this.overlay&&this.options.overlay&&(this.overlay.dispose(),this.overlay=null),this.elementObj&&document.body.adopt(this.elementObj.hide()),this.cont.empty(),this.opt.empty(),this.closbtn.invisible(),this.win.invisible(),this.element&&(this.element=null),this.initParams(),this.toggleListeners(),this.options.onShow=$empty,this.options.onClose=$empty,this.fx&&(this.fx=null))},initParams:function(){this.options={},this.setOptions(this.presets)},toggleListeners:function(e){var t=e?"addEvent":"removeEvent";this.closbtn[t]("click",this.bound.close),document[t]("keydown",this.bound.key),this.options.reposition&&window[t]("resize",this.bound.window)},getContent:function(e){this.toggleListeners(!0);if(e)return this.applyContent(e);var t=this.options.type,n=this.options.url,r=this.options;if(!n)return!1;if(!this.options.ajax)return $isStr(n)&&(n=n.replace(/^#/,""),$(n)&&(n=$(n))),this.applyContent(n);this.loading(),this.options=r,this.title.attr("title",this.options.title.trim());var i=this.options.width.toInt()||600,s=this.options.height.toInt()||400;switch(t){case"image":var o=new Image,u=n;o.onload=function(){var e=document.getSize(),t;e.x-=this.options.marginImage.x,e.y-=this.options.marginImage.y,t={x:o.width,y:o.height};for(var n=2;n--;)t.x>e.x?(t.y*=e.x/t.x,t.x=e.x):t.y>e.y&&(t.x*=e.y/t.y,t.y=e.y);t.x=t.x.toInt(),t.y=t.y.toInt(),this.applyContent('<div class="p10 bgwh tc"><img class="ibox_ajax_image" src="'+u+'" width="'+t.x+'" height="'+t.y+'" /></div>')}.bind(this),o.onerror=function(){this.alert("\u56fe\u7247\u52a0\u8f7d\u6ca1\u6709\u6210\u529f\uff01")}.bind(this),o.src=u;break;case"iframe":var a={src:n,styles:{width:i,height:s,background:"url("+this.options.loadimg+") no-repeat center",border:0},"class":"ibox_ajax_iframe",frameborder:0};this.applyContent(new IFrame(a));break;case"ajax":var f=this;(new Request.HTML($merge({method:"get"},$extend({evalScripts:!1},this.options.ajaxOptions)))).addEvents({onFailure:this.onError.bind(this),onComplete:function(e,t,n,r){f.applyContent(n,r)}}).send({url:n});break;case"swf":var l='<div id="swfIbox"></div>',c=new Swiff(n,{width:i,height:s,container:$("swfIbox")});this.options.height="auto",this.applyContent(l,c());break;default:return this.applyContent(n)}},applyContent:function(content,js){var position=this.cont.css("position");if($isStr(content))this.cont.set("html",content).css("position","absolute");else{if($type(content)!=="element")return this;this.elementObj=content,this.cont.empty().adopt(content.show().css("position","absolute"))}return js&&eval(js),this.winsize=this.cont.getSize(),this.cont.css("position",position),this.title.set("html",this.options.title),this.showControl(),this.reposition(),this.win.visible(),this.isOpen=!0,$isFun(this.options.onShow)&&this.options.onShow.call(this),this},showControl:function(){this.options.closable?this.closbtn.visible():this.closbtn.invisible(),this.overlay&&this.options.overlay&&this.overlay.show(),this.options.titleable?this.bar.show():this.bar.hide(),this.options.optable?this.opt.show():this.opt.hide(),this.options.dragable&&$startDrag(this.title,this.win)},reposition:function(e){var t=this.winsize?this.winsize.x:this.win.w(),n=this.win.h(),r=window.getSize().x,i=window.getSize().y,s=document.getScroll().y,o=n<i,u,a,f=this.options.width.toInt(),l=this.options.height.toInt();n=l||n,t=f||t,u=(r-t)/2,a=(i-n)/2+s,this.ie6||!this.options.reposition?(this.win.setStyle("position","absolute"),a=o?(i-n)/2+s:50+s):(a=o?(i-n)/2:50,this.win.css("position","fixed"));var c={width:t,left:u,top:a};this.options.useFx&&e===!0&&(this.fx={win:new Fx.Morph(this.win,$merge({duration:750,transition:Fx.Transitions.Quint.easeOut,link:"cancel",unit:"px"},this.options.resizeFx))}),this.isOpen&&this.fx&&!this.ie6?this.fx.win.cancel().start(c):this.win.setStyles(c)},onError:function(){this.alert("\u52a0\u8f7d\u51fa\u4e86\u70b9\u5c0f\u95ee\u9898\u3002")},onKey:function(e){switch(e.key){case"esc":this.closbtn.css("visibility")==="visible"&&this.close(e);case"up":case"down":return!1}},extend:function(e){return $extend(this,e)}};Ibox.extend(new Options);var $detailList=function(e,t,n,r){e.each(function(e){$powerFloat(e,{eventType:"click",zIndex:20,position:t?t:"4-1",showCall:function(){$isFun(n)&&n(this)},hideCall:function(){$isFun(r)&&r(this)}})})},Calendar=new Class({Implements:[Options,Events],options:{initDate:new Date,monthText:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],weekText:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],range:[new Date(2e3,0,1),new Date(2016,0,1)],display:!0,zIndex:"",showMode:"",onSelect:$empty},initialize:function(e,t){this.setOptions(t),this.container=$(e),this.initDate=this.options.initDate,this.init(this.container,this.initDate),this.display=this.options.display,this.display?this.show():this.hide()},init:function(e,t){e.set("html","");var n=this.MonthInfo(t.getFullYear(),t.getMonth()),r=this.MonthInfo(t.getFullYear(),t.getMonth()-1<0?11:t.getMonth()-1);e.addClass("mcalendar").css({zIndex:this.options.zIndex});var s=[];s.push('<li><a class="mcalendar_preyear" href="javascript:" cal="preyear" title="\u4e0a\u4e00\u5e74"></a></li>'),s.push('<li><a class="mcalendar_premonth" href="javascript:" cal="premonth" title="\u4e0a\u4e00\u6708"></a></li>'),s.push('<li><a class="w50 g5" href="javascript:" cal="month" month="'+t.getMonth()+'">'+this.options.monthText[t.getMonth()]+"</a></li>"),s.push('<li><a class="w50 g5" href="javascript:" cal="year" year="'+t.getFullYear()+'">'+t.getFullYear()+"</a></li>"),s.push('<li><a class="mcalendar_nextmonth" href="javascript:" cal="nextmonth" title="\u4e0b\u4e00\u6708"></a></li>'),s.push('<li><a class="mcalendar_nextyear" href="javascript:" cal="nextyear" title="\u4e0b\u4e00\u5e74"></a></li>'),s.push('<li><div class="month_select_box dn"></div></li>'),s.push('<li><div class="year_select_box dn"></div></li>');var o=(new Element("ul")).set("html",s.join("")).addClass("mcalendar_top"),u=[];for(i=0;i<7;i++)u.push('<li class="mcalendar_week">'+this.options.weekText[i]+"</li>");var a=(new Element("ul")).set("html",u.join("")).addClass("mcalendar_weekx");e.adopt(o,a);var f=new Date,l=new Date(f.getFullYear(),f.getMonth(),f.getDate()),c=this.options.showMode,h,p;if(c==="all")h=this.options.range[0],p=this.options.range[1];else if(c==="later")h=l,p=this.options.range[1];else{if(c!=="pass")return;h=this.options.range[0],p=l}var d=function(e,n){v.grab((new Element("li")).set("html",'<a href="javascript:" class="'+e+'" year="'+t.getFullYear()+'" month="'+t.getMonth()+'" date="'+n+'">'+n+"</a>"))};for(i=0;i<5;i++){var v=(new Element("ul")).addClass("mcalendar_dayx");for(var m=0;m<7;m++){var g=7*i-n.firstDay+m+1;if(g>0&&g<=n.days){var y=new Date(t.getFullYear(),t.getMonth(),g);if(y>=h&&y<=p)if(y.toDateString()===l.toDateString()){var b=m===0||m===6?"mcalendar_selected co":"mcalendar_selected";d(b,g)}else m===0||m===6?d("co",g):d("",g);else v.grab((new Element("li")).addClass("mcalendar_outrange").set("html",g))}else{var g=g>n.days?g-n.days:r.days+g;v.grab((new Element("li")).addClass("mcalendar_outrange").set("html",g))}}e.adopt(v)}e.getElements("a").addEvent("focus",function(){this.blur()});var w=!1,E=!1;e.getElements("a").addEvent("click",function(n){var r=(new Event(n)).target;if($(r).getProperty("cal")=="preyear")t.setFullYear(t.getFullYear()-1),this.init(e,t);else if($(r).getProperty("cal")=="nextyear")t.setFullYear(t.getFullYear()+1),this.init(e,t);else if($(r).getProperty("cal")=="premonth")t.setDate(1),t.setMonth(t.getMonth()-1),this.init(e,t);else if($(r).getProperty("cal")=="nextmonth")t.setMonth(t.getMonth()+1),this.init(e,t);else if($(r).getProperty("cal")=="year"){var i=$$(".year_select_box"),s=t.getFullYear(),o=function(e,t){i.grab((new Element("a")).attr({href:"javascript:;",year_val:t}).addClass(e).txt(t))};i.toggle(),w&&$$(".month_select_box").hide();if(!E){for(var u=s-5;u<=s+4;u++)u===s?o("list mcalendar_selected",u):o("list",u);i.addEvent("click",function(n){var r=(new Event(n)).target,i=n.target.txt();i.length<5&&($(r).txt(n.target.txt()),t.setFullYear(r.attr("year_val")),this.init(e,t))}.bind(this)),E=!0}}else if($(r).getProperty("cal")=="month"){var a=$$(".month_select_box"),f=t.getMonth(),l=this.options,c=function(e,t){a.grab((new Element("a")).attr({href:"javascript:;",mon_val:t}).addClass(e).txt(l.monthText[t]))};a.toggle(),E&&$$(".year_select_box").hide();if(!w){for(u=0;u<12;u++)u===f?c("list mcalendar_selected",u):c("list",u);a.addEvent("click",function(n){var r=(new Event(n)).target;$(r).txt(n.target.txt()),t.setMonth(r.attr("mon_val")),this.init(e,t)}.bind(this)),w=!0}}else{var h=e.getElement(".mcalendar_selected");h&&h.removeClass("mcalendar_selected"),$(r).addClass("mcalendar_selected"),this.fireEvent("select",[new Date($(r).getProperty("year"),$(r).getProperty("month"),$(r).getProperty("date"))])}return!1}.bind(this))},MonthInfo:function(e,t){var n=[31,28,31,30,31,30,31,31,30,31,30,31],r=new Date(e,t,1);return r.setDate(1),r.getDate()==2&&r.setDate(0),e+=1900,{days:t==1?e%4==0&&e%100!=0||e%400==0?29:28:n[t],firstDay:r.getDay()}},show:function(){this.display=!0,this.container.show()},hide:function(){this.display=!1,this.container.hide()},dispose:function(){this.container.empty()}}),Datepicker=new Class({Implements:[Options],options:{initDate:"",monthText:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],weekText:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],range:[new Date(2e3,0,1),new Date(2016,0,1)],splitChar:"-",zIndex:300,showMode:"all",onSelect:$empty},initialize:function(e,t,n){this.setOptions(n),this.calendar=null,this.container=null,this.ele=$(e),this.ele.addEvent("click",function(e){t.css("color","#555");if(this.calendar){if(!this.calendar.display){this.resetPostion(e),this.calendar.show();return}this.calendar.hide()}this.container||(this.container=(new Element("div")).attr("id",$time()+"_date")),this.resetPostion(e),$(document.body).grab(this.container);var n=this.options.initdate||new Date;this.calendar=new Calendar(this.container,{initDate:n,range:this.options.range,monthText:this.options.monthText,weekText:this.options.weekText,zIndex:this.options.zIndex,showMode:this.options.showMode,onSelect:function(e){var n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();this.options.splitChar?(r<10&&(r="0"+r),i<10&&(i="0"+i),t.value=n+this.options.splitChar+r+this.options.splitChar+i):t.value=n+"\u5e74"+r+"\u6708"+i+"\u65e5",this.calendar.hide(),this.options.onSelect.call(t)}.bind(this)})}.bind(this));if(t.val().length<1){var r=new Date;t.val(r.getFullYear()+this.options.splitChar+(r.getMonth()+1)+this.options.splitChar+r.getDate())}document.addEvent("mousedown",this.insideSelector.bind(this))},resetPostion:function(e){var t=(new Event(e)).target,n=$(t).getCoordinates();this.container.css({position:"absolute",left:n.left,top:n.bottom})},insideSelector:function(e){$(e.target).getParents(".mcalendar").length===0&&e.target!==this.ele&&this.calendar&&this.calendar.hide()},dispose:function(){this.calendar&&this.calendar.dispose()}}),$funUploadFormat=function(e){var t={img:["jpg","jpeg","png","gif","bmp"],doc:["txt","doc","docx","rtf"],xls:["xls","xlsx"],pdf:["pdf"],ppt:["ppt","pptx"],zip:["rar","zip","7z"],video:["avi","mpg","wmv","asf","rm","rmvb","fla","mov","mp4","3gp","mkv","vob","swf"],audio:["wav","midi","mp3","wma"]},n=e.val(),r=n.split("\\"),i=r[r.length-1],s=n.replace(/.+\./,"").toLowerCase(),o="others";return Object.map(t,function(e,t){e.contains(s)&&(o=t)}),(i+"|"+o).split("|")};$isIe6&&Ibox.open({url:'<div class="browser"><a class="browser_link" title="\u4e0b\u8f7dIE\u6d4f\u89c8\u5668" href="http://windows.microsoft.com/zh-CN/internet-explorer/downloads/ie"></a><a class="browser_link" title="\u4e0b\u8f7dFireFox\u6d4f\u89c8\u5668" href="http://firefox.com.cn/"></a><a class="browser_link" title="\u4e0b\u8f7dSafari\u6d4f\u89c8\u5668" href="http://www.apple.com.cn/safari/"></a><a class="browser_link" title="\u4e0b\u8f7dChrome\u6d4f\u89c8\u5668" href="http://www.google.com/chrome/index.html?hl=zh_cn&amp;brand=CHMA&amp;utm_campaign=zh_cn&amp;utm_source=zh_cn-ha-apac-zh_cn-bk&amp;utm_medium=ha"></a></div>',width:698});var prompt=new Class({Implements:[Options],options:{msg:"",time:"4000",isDelete:!1},initialize:function(e){$("promptBox")&&$("promptBox").dispose(),this.setOptions(e);var t=new Element("div",{id:"promptBox","class":"prompt_box fix"});t.inject(document.body,"bottom"),t.appendHTML('<span class="dib pl20 pr20">'+this.options.msg+"</span>"),this.setTime(t),this.setPosition(t)},setPosition:function(e){var t=e.w(),n=document.body.clientWidth,r=n/2-t/2,i=0;e.css("left",r+"px"),e.css("top",i+"px"),e.tween("top",[0,50])},setTime:function(e){setTimeout(function(){e.tween("top",[50,0])},this.options.time)}}),previewImgs=new Class({Implements:[Options],options:{file:"",target:"",form:"",funCompleteLoadding:function(){}},initialize:function(e){var t=e.file,n=this.funcCheckType;t.addEvent("change",function(){$tipBox.dispose(t);var r=e.target;if(n(t.val())){e.form.submit();if(r.readyState){var i=function(){var t=null;try{t=r.readyState}catch(n){t=null}if(t=="complete"){e.funCompleteLoadding();return}window.setTimeout(i,10)};i()}else r.onload=function(){e.funCompleteLoadding()}}else $tipBox(t,{txt:"\u6587\u4ef6\u683c\u5f0f\u53ea\u80fd\u4e3ajpg\u3001gif\u3001png\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u4e0a\u4f20\u56fe\u7247\uff01",width:"350"})})},funcCheckType:function(e){var t=e.replace(/.+\./,"").toLowerCase(),n=["gif","png","jpg"];return n.contains(t)?!0:!1}})